---
title: 变更记录
---

## 20241115 16:00
### 修改原因
修复卡片视图单列显示问题
### 修改目的
解决卡片视图在所有屏幕尺寸下只显示一列的问题
### 修改效果
移除外层网格容器后，卡片视图在不同屏幕尺寸下能正确显示多列（小屏幕1列、sm 2列、lg 3列、xl 4列、2xl 5列）
### 修改地方
```diff
- <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-4">
-   <CardView table={tables.find(t => t.id === activeTableId)!} onUpdateTable={updateTable} />
- </div>
+ <CardView table={tables.find(t => t.id === activeTableId)!} onUpdateTable={updateTable} />
```

## 20241115 16:30
### 修改原因
实现卡片视图数据持久化功能
### 修改目的
解决卡片视图中所做的修改无法正确保存到本地数据持久化存储中的问题
### 修改效果
添加了与DataTable组件类似的localStorage数据持久化逻辑，使CardView组件能够在浏览器本地存储数据修改
### 修改地方
在CardView.tsx中：
1. 导入useEffect钩子
2. 添加localStorage数据持久化逻辑
3. 使用包装函数保存数据到localStorage

```typescript
// 添加useEffect导入
import { useState, useEffect } from 'react';

// 包装onUpdateTable函数以添加持久化逻辑
const onUpdateTable = (updatedTable: Table) => {
  // 保存到localStorage
  try {
    localStorage.setItem(`table_data_${table.id || 'default'}`, JSON.stringify(updatedTable));
  } catch (error) {
    console.error('Failed to save table data to localStorage:', error);
  }
  // 调用原始的onUpdateTable函数
  originalOnUpdateTable(updatedTable);
};
```

## 20241115 15:00
### 修改原因
修复getOptionColor函数类型错误
### 修改目的
解决TypeScript编译错误，确保选项颜色设置正确
### 修改效果
修复了getOptionColor函数参数类型不匹配的问题，使颜色设置功能正常工作
### 修改地方
在CardView.tsx中：
```diff
- const getOptionColor = (value: string) => {
+ const getOptionColor = (value: string | undefined) => {
    if (!value) return 'bg-gray-200';
    // ... 其他代码保持不变
```

## 20231028 15:00
### 修改原因
移除提示信息
### 修改目的
优化用户体验，减少不必要的提示信息干扰
### 修改效果
移除了部分冗余的提示信息，使界面更加简洁
### 修改地方
在App.tsx中移除了相关提示信息的显示逻辑

## 20231028 14:00
### 修改原因
修复数据持久化问题
### 修改目的
解决表格数据无法正确保存到本地存储的问题
### 修改效果
实现了完整的数据持久化功能，确保用户数据不会丢失
### 修改地方
在DataTable.tsx中实现了localStorage数据持久化逻辑

## 20231028 13:00
### 修改原因
修复子表新增行问题
### 修改目的
解决在子表中新增行时数据不正确的bug
### 修改效果
修复了子表新增行的功能，确保数据正确插入
### 修改地方
在相关组件中修正了新增行的处理逻辑

## 20231028 12:00
### 修改原因
实现数据持久化功能
### 修改目的
为应用添加本地数据存储能力，防止页面刷新后数据丢失
### 修改效果
实现了基于localStorage的数据持久化功能
### 修改地方
在App.tsx和相关hook中添加了数据持久化逻辑
